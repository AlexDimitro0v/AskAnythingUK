{% extends 'main/base.html' %}
{% block content%}
{% load static %}

{% if feedback_candidates and feedback_request.feedbacker == feedback_request.feedbackee %}
<div class="large-area">
  <div class="decorative-text-wrapper noselect">Candidates</div>
  <div class="cardbody" style="margin-top:50px; margin-bottom: 0">
    {% for candidate in feedback_candidates%}       <!--For username in User instance-->
    <div style="margin-bottom: 20px; display: block; background: #eee; border-radius: 10px; box-shadow: 0px 0px 0px #ccc;" class="feedback-request">
      <span class="feedback-request-link" style="display: inline-block; padding: 5px; padding-left: 20px; padding-right: 20px">
        <a href="{% url 'profile-page' %}?user={{candidate}}&feedback={{feedback_request.id}}">
          <img class="photo-circle" src="{{ candidate.userprofile.image.url }}"/>
          <span style="margin-left: 10px; font-weight: 600">{{candidate}}</span>
        </a>
      </span>
      <span style="float: right">
        <a href="{% url 'choose-feedbacker-page' %}?user={{candidate}}&feedback={{feedback_request.id}}">
          <button class="btn btn-outline-info" >Choose as Feedbacker</button>
        </a>
      </span>
      <div class="border-top pt-2 mt-3"></div>
      <p style="font-size: 100%; line-height: 1.8em">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer malesuada urna lectus, eu pretium odio vulputate ac. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nulla facilisi. Cras sollicitudin nunc a justo aliquet venenatis. Sed vitae erat lacus. Nunc faucibus augue ex. Morbi tempor rutrum tortor suscipit pharetra. Mauris euismod interdum ipsum, at faucibus ex viverra at. Maecenas iaculis iaculis mi, sed ullamcorper diam efficitur ac.
      </p>
      <div>

      </div>
    </div>
    {% endfor %}
  </div>
</div>

{% endif %}


{% if user_is_feedbacker or user_is_feedbackee%}
<div class="large-area">
  <div class="decorative-text-wrapper noselect">Files</div>
  <div class="cardbody"  style="margin-top:50px; margin-bottom: 0">
    <div class="container">
      <div class="row">
        <div class="col-sm landing-card" style="text-align: center; margin: 15px">
          <img src="{{ feedback_request.feedbackee.userprofile.image.url }}" class="large-photo-circle" style="border-color: #ccc;"/>
          <h3 style="margin-top: 10px;">FEEDBACKEE</h3>
          <div class="border-top pt-4 "></div>
          <a href="{{ feedbackee_files_link }}" download="Feedbackee Files" style="text-decoration:none;">
              <button class="btn btn-outline-info" >Download Feedbackee's Files</button>
          </a>
        </div>
          {% if feedback_request.feedbacker == feedback_request.feedbackee%}
            <div class="col-sm landing-card" style="text-align: center; margin: 15px;display: flex; justify-content: center; align-content: center; flex-direction: column;">
              <p style="text-align: center; font-size: 1.2em; font-weight: 600; display: table-cell; vertical-align: middle;">No Feedbacker Yet</p>
            </div>
          {% else %}
            <div class="col-sm landing-card" style="text-align: center; margin: 15px">
            <img src="{{ feedback_request.feedbacker.userprofile.image.url }}" class="large-photo-circle" style="border-color: #ccc;"/>
            <h3 style="margin-top: 10px;">FEEDBACKER</h3>
            <div class="border-top pt-4"></div>
              {% if feedbacker_files_link != None %}
                  <a href="{{ feedbacker_files_link }}" download="Feedbacker Files"  style="text-decoration:none;">
                      <button class="btn btn-outline-info" >Download Feedbacker's Files</button>
                  </a>
              {% endif %}
              {% if user_is_feedbacker and feedbacker_files_link == None %}
                  <a href="{%url 'submit-feedback-page'%}?request_id={{ request_id }}"  style="text-decoration:none;">
                      <button class="btn btn-outline-info" >Submit Feedback</button>
                  </a>
              {% endif %}
              {% if user_is_feedbackee and feedbacker_files_link == None %}
                <p style="text-align: center; font-size: 1.2em; font-weight: 600; margin-top: -4px">No Files Yet</p>
              {% endif %}
              {% if user_is_feedbackee and feedbacker_files_link != None and not feedback_request.feedbacker_rated%}
                  <a href="{%url 'rate-feedbacker-page'%}?request_id={{ request_id }}"  style="text-decoration:none;">
                      <button class="btn btn-outline-info" style="margin-top: 15px">Rate Feedbacker</button>
                  </a>
              {% endif %}
              </div>
            {% endif %}

        </div>
    </div>
  </div>
</div>
{% endif %}

<div class="large-area">
  <div class="decorative-text-wrapper noselect">Description</div>
    <div class="cardbody"  style="margin-top: 60px; margin-bottom: 0">
      <div style="margin-bottom: 18px;">
        <img style="vertical-align:middle; width: 45px; height: 45px; margin-top: 0px; border-radius: 100px; border: 3px #ddd solid; margin-right: 5px" src="{{ feedback_request.feedbackee.userprofile.image.url }}">
        <span class="bold-p">{{ feedback_request.feedbackee }}</span>
        <span class="bold-p" style="float: right; font-size: 1em;vertical-align: middle; line-height: 45px">Posted {{ time_delta }} ago </span>
      </div>
      <div class="border-top pt-3 "></div>

    <div style="margin-top: 10px; margin-bottom: 10px">
        <h1 style="text-align: center; font-size: 2em; font-weight: 600; margin-bottom: 20px">{{ feedback_request.title }}</h1>
        <p>{{ feedback_request.maintext }}</p>
   </div>
   <div class="border-top pt-3 "></div>

   <div style=" padding-top: 0; text-align: center">
     <span class="status-info noselect" style="font-size: 1.4em">
       <img src = "{% static 'img/pound_icon3.png'%}" style="height: 28px;  vertical-align: middle;" />
         Â£{{ feedback_request.reward }}
     </span>
     <span class="status-info noselect" style="font-size: 1.4em">
       <img src = "{% static 'img/time_icon3.png'%}" style="vertical-align: middle; height: 28px" />
       {{ feedback_request.time_limit }} days
     </span>
   </div>
</div>
</div>
{% if not user_is_feedbacker and not user_is_feedbackee %}
<div class="large-area">
  <div class="decorative-text-wrapper noselect">Apply</div>
  <div class="cardbody"  style="margin-top:50px; margin-bottom: 0">
    {% if user_was_rejected %}
      <img src = "{% static 'img/cross4.png'%}" class="photo-circle large-photo-circle"/>
      <p style="text-align: center; font-size: 1.2em; font-weight: 600; ">Application Rejected</p>
    {% elif not user_is_candidate %}
    <div>
      <ul>
      <li>By applying, you are agreeing to provide feedback within the specified timeframe. <br></li>
      <li>If your application is accepted, you can no longer withdraw it.</li>
      </ul>
  <!--
    <form style="font-family: inherit">
      <input type="checkbox" class="checkbox" style="-webkit-appearance: checkbox;"> I understand<br>
      </form> -->
    </div>
    <br>
    <br>

    <div class="button-corner">
    <a href="{%url 'apply-as-feedbacker-page'%}?request_id={{ request_id }}" style="text-decoration:none;">
        <button class="btn btn-outline-info" >Apply as Feedbacker</button>
    </a>
    </div>
    {% else %}
    <img src = "{% static 'img/tick4.png'%}" class="photo-circle large-photo-circle"/>
    <p style="text-align: center; font-size: 1.2em; font-weight: 600; ">Application Submitted</p>
    <br>
    <br>
    <div class="button-corner">
    <a href="{%url 'withdraw-application-page'%}?request_id={{ request_id }}" style="text-decoration:none;">
        <button class="btn btn-outline-info" >Withdraw Application</button>
    </a>
    </div>
    {% endif %}
  </div>
</div>
{% endif %}
{% if user_is_feedbackee and feedback_request.feedbacker == feedback_request.feedbackee %}
<div class="large-area">
  <div class="decorative-text-wrapper noselect">Options</div>
  <div class="cardbody"  style="margin-top:50px; margin-bottom: 0">
    <a href="{% url 'request-delete' feedback_request.id %}" style="text-decoration:none;">
        <button class="btn btn-outline-info" >Remove Feedback Request</button>
    </a>
  </div>
</div>
{% endif %}
{% endblock%}
